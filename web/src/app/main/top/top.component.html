<app-top-menu [items]="menuItems">

  <span *ngIf="(isAuth$ | async)">
    <ng-container *ngIf="(jobStat$ | async)"></ng-container>
    <span class="job-status">
      <button [appForTest]="'jobs_yellow'" mat-mini-fab [style.backgroundColor]="'#FFEA00'"
        [routerLink]="['/task', { page: 0, filter: 'running' }]" matTooltip="Show jobs in progress">
        {{ jobStatus.running }}
      </button>
      <button [appForTest]="'jobs_green'" mat-mini-fab color="accent"
        [routerLink]="['/task', { page: 0, filter: 'success' }]" matTooltip="Show success jobs">
        {{ jobStatus.success > 1000 ? (jobStatus.success/1000).toFixed(1) + 'K' : jobStatus.success }}
      </button>
      <button [appForTest]="'jobs_red'" mat-mini-fab [style.backgroundColor]="'#FF8A80'"
        [routerLink]="['/task', { page: 0, filter: 'failed' }]" matTooltip="Show failed jobs">
        {{ jobStatus.failed > 1000 ? (jobStatus.failed/1000).toFixed(1) + 'K' : jobStatus.failed }}
      </button>
    </span>

    <button [appForTest]="'help'" mat-icon-button [matMenuTriggerFor]="helpMenu">
      <mat-icon>help</mat-icon>
    </button>
    <mat-menu #helpMenu="matMenu" [overlapTrigger]="false">
      <a href="https://t.me/joinchat/DYEBbReM-hj421LV0y5prw" target="_blank" [appForTest]="'ask_for_help'"
        mat-menu-item>
        <mat-icon>contact_support</mat-icon>
        <span>Ask for help</span>
      </a>
      <a [appForTest]="'dock'" mat-menu-item href="http://docs.arenadata.io/adcm/" target="_blank">
        <mat-icon>event_seat</mat-icon>
        <span>Documentation</span>
      </a>
    </mat-menu>

    <button [appForTest]="'account'" class="toppanel_button_user" mat-icon-button [matMenuTriggerFor]="accountMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu #accountMenu="matMenu" [overlapTrigger]="false">
      <a [appForTest]="'settings'" mat-menu-item [routerLink]="['/admin/settings/']">
        <mat-icon>settings_applications</mat-icon>
        <span>Settings</span>
      </a>
      <button [appForTest]="'profile'" mat-menu-item (click)="profile()">
        <mat-icon>folder_shared</mat-icon>
        <span>Profile</span>
      </button>
      <button [appForTest]="'logout'" mat-menu-item (click)="logout()">
        <mat-icon>exit_to_app</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </span>

</app-top-menu>
